<!DOCTYPE html>
<html>
<head>
    <title>Project: Selection Sort Visualizer</title>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href='../../css/ka-projects.css' rel='stylesheet' type='text/css'>
    <script type="text/javascript" src="../../js/vendor/processing.min.js"></script>
</head>
<body>
<div class="container-khanacademy">
    <div class="container-text">
        <h2>Selection Sort Visualizer</h2>
        <p>In this project, you'll visualize the swapping strategy of selection sort, similar to the screenshot on the
            right.

            To start off with, you'll need to bring in the selection sort algorithm code from the last challenge. Then,
            come up with an array of data and send that through the algorithm. For each iteration of the algorithm,
            display the current state of the array on the canvas, and then draw a line or arrow that shows the numbers
            being swapped.

            Once you've successfully displayed the array being sorted, create 3 more arrays and display them as well,
            in a quadrant on the canvas. Create one array with reverse sorted values, one array where a few values are
            the same, and one array where only one value is out of order..</p>
    </div>
    <div class="container-program">
        <<canvas id="canvas"></canvas>
        <!-- Credits to Robert Tupelo-Schneck for this processingJS template -->
        <script>
            var canvas = document.getElementById("canvas");
            var processing = new Processing(canvas, function(processing) {
                processing.size(400, 400);
                processing.background(0xFFF);
                var mouseIsPressed = false;
                processing.mousePressed = function() {
                    mouseIsPressed = true;
                };
                processing.mouseReleased = function() {
                    mouseIsPressed = false;
                };
                var keyIsPressed = false;
                processing.keyPressed = function() {
                    keyIsPressed = true;
                };
                processing.keyReleased = function() {
                    keyIsPressed = false;
                };

                function getImage(s) {
                    var url = "https://www.kasandbox.org/programming-images/" + s + ".png";
                    processing.externals.sketch.imageCache.add(url);
                    return processing.loadImage(url);
                }
                // use degrees rather than radians in rotate function
                var rotateFn = processing.rotate;
                processing.rotate = function(angle) {
                    rotateFn(processing.radians(angle));
                };
                with(processing) {
                    // Set background color at the top so that
                    // it does not interfere with the text output
                    background(0);
                    // Number of pixels between each row of array sorts
                    var spaceBetween = 85;
                    var yPos = 0;
                    // Draw the lines separating the different arrays
                    for (var l = 0; l < (9 / 10) * width; l += 94) {
                        stroke(25,25,112);
                        line(l, 0, l, height);
                    }
                    /************************
                     * Visualize the array *
                     ************************/
                    var displayArray = function(array, pos, step) {
                        textFont(createFont("monospace"), 12);
                        fill(255, 255, 0);
                        // text(array, 15 + pos, 40 + step);
                        text(array, 1, 40 + step);
                    };

                    var swap = function(array, firstIndex, secondIndex) {
                        var temp = array[firstIndex];
                        array[firstIndex] = array[secondIndex];
                        array[secondIndex] = temp;
                    };

                    var indexOfMinimum = function(array, startIndex, pos, step) {

                        var minValue = array[startIndex];
                        var minIndex = startIndex;

                        for(var i = minIndex + 1; i < array.length; i++) {
                            if(array[i] < minValue) {
                                minIndex = i;
                                minValue = array[i];
                            }
                        }
                        displayArray(array, pos, step);
                        return minIndex;
                    };

                    var selectionSort = function(array) {
                        var pos = 0;
                        for(pos ; pos < array.length ;pos++ ) {
                            println("Looking at pos "+pos);
                            canvas_step = pos*40;
                            canvas_pos = pos*50;
                            var mi = indexOfMinimum(array, pos, canvas_pos, canvas_step);
                            println("Index of minimum at start "+pos+" is "+mi+" which is number "+array[mi]);
                            swap(array,pos ,mi );
                            println("array after swap is: "+array);
                        }
                    };

                    var array1 = [2, 1, 5, 78,67,4];
                    array = selectionSort(array1);

                    var array2 = [34,7,12,34,7,89,113];
                    array = selectionSort(array2);

                    var array3 = [2, 1, 5, 78,67,4,12444];
                    array = selectionSort(array3);

                    var array4 = [2, 1, 5, 78,67,4];
                    array = selectionSort(array4);
                }
                if (typeof draw !== 'undefined') processing.draw = draw;
            });
        </script>
    </div>
</div>
</body>
</html>